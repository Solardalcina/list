<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário de Lista de Compras</title>
    <style>
        .item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .item button {
            margin: 0 6px;
            padding: 8px 12px;
            font-size: 16px;
        }

        .item input[type="number"] {
            width: 45px;
            padding: 6px;
            font-size: 16px;
        }

        .categoria {
            margin-top: 20px;
            border-bottom: 1px solid #ccc;
            padding-bottom: 10px;
        }

        .btn-maior {
            padding: 14px 28px;
            font-size: 18px;
            border-radius: 8px;
            margin-top: 20px;
        }
    </style>
</head>

<body>
    <form id="listaComprasForm">
        <h2>Formulário de Lista de Compras</h2>

        <div class="categoria">
            <h3>Laticínios</h3>
            <div class="item">
                <button type="button" onclick="decrementar('Iogurte')">-</button>
                <input type="number" id="Iogurte" name="Iogurte" value="0" readonly>
                <button type="button" onclick="incrementar('Iogurte')">+</button>
                <label for="Iogurte">Iogurte</label>
            </div>
        </div>

        <div class="categoria">
            <h3>Limpeza</h3>
            <div class="item">
                <button type="button" onclick="decrementar('Agua sanitaria')">-</button>
                <input type="number" id="Agua sanitaria" name="Agua sanitaria" value="0" readonly>
                <button type="button" onclick="incrementar('Agua sanitaria')">+</button>
                <label for="Agua sanitaria">Agua sanitaria</label>
            </div>
            <div class="item">
                <button type="button" onclick="decrementar('Desinfetante')">-</button>
                <input type="number" id="Desinfetante" name="Desinfetante" value="0" readonly>
                <button type="button" onclick="incrementar('Desinfetante')">+</button>
                <label for="Desinfetante">Desinfetante</label>
            </div>
        </div>

        <input type="submit" value="Gerar Lista" class="btn-maior">
    </form>

    <script>
        function incrementar(id) {
            const input = document.getElementById(id);
            input.value = parseInt(input.value) + 1;
        }

        function decrementar(id) {
            const input = document.getElementById(id);
            if (parseInt(input.value) > 0) {
                input.value = parseInt(input.value) - 1;
            }
        }

        document.getElementById('listaComprasForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const itens = [
                {
                    nomeSimples: 'Agua sanitaria',
                    nomeDetalhado: 'Agua sanitaria 5L',
                    quantidade: document.getElementById('Agua sanitaria').value
                },
                {
                    nomeSimples: 'Desinfetante',
                    nomeDetalhado: 'Desinfetante Urca Lavanda',
                    quantidade: document.getElementById('Desinfetante').value
                },
                {
                    nomeSimples: 'Iogurte',
                    nomeDetalhado: 'Copinho iogurte natural',
                    quantidade: document.getElementById('Iogurte').value
                }
            ];

            let listaTexto = "Bom dia!\n\n";
            for (const item of itens) {
                if (item.quantidade > 0) {
                    listaTexto += `${item.quantidade}, ${item.nomeDetalhado}\n`;
                }
            }

            const agora = new Date();
            const opcoes = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            };
            const titulo = "Lista de compra de " + agora.toLocaleDateString('pt-BR', opcoes);

            const novaJanela = window.open('', '_blank');
            novaJanela.document.write('<html><head><title>' + titulo + '</title>');
            novaJanela.document.write('<meta name="viewport" content="width=device-width, initial-scale=1">');
            novaJanela.document.write('<style> body { font-size: 18px; } #tituloLista { margin-bottom: 30px; } #lista { margin-top: 15px; } button { padding: 10px 20px; font-size: 18px; } </style>');
            novaJanela.document.write('</head><body>');
            novaJanela.document.write('<h3 id="tituloLista">' + titulo + '</h3>');
            novaJanela.document.write('<pre id="lista">' + listaTexto + '</pre>');
            novaJanela.document.write('<button onclick="copiarLista()">Copiar Lista</button>');
            novaJanela.document.write('<script>function copiarLista() { const conteudo = document.getElementById("tituloLista").textContent + "\n\n" + document.getElementById("lista").textContent; const tempInput = document.createElement("textarea"); tempInput.value = conteudo; document.body.appendChild(tempInput); tempInput.select(); document.execCommand("copy"); document.body.removeChild(tempInput); alert("Lista copiada!"); }<\/script>');
            novaJanela.document.write('</body></html>');
            novaJanela.document.close();
        });
    </script>
</body>

</html>
